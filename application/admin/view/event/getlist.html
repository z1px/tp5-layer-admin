{layout name="layout:btable" /}

<blockquote class="layui-elem-quote" style="overflow:visible;">
    <button type="button" class="layui-btn layui-btn-small" id="edit"><i class="fa fa-plus" aria-hidden="true"></i> 添加</button>
    <form class="layui-form" style="float:right;">
        <div class="layui-form-item" style="margin:0;">
            <label class="layui-form-label">事件类型</label>
            <div class="layui-input-inline">
                <select name="type" lay-filter="">
                    <option value="">请选择事件类型</option>
                    <option value="">请选择事件类型</option>
                    {volist name="list_type" id="vo"}
                    <option value="{$key}">{$vo}</option>
                    {/volist}
                </select>
            </div>
            <label class="layui-form-label">事件状态</label>
            <div class="layui-input-inline">
                <select name="status" lay-filter="">
                    <option value="">请选择事件状态</option>
                    <option value="">请选择事件状态</option>
                    {volist name="list_status" id="vo"}
                    <option value="{$key}">{$vo}</option>
                    {/volist}
                </select>
            </div>
            <label class="layui-form-label">关键字</label>
            <div class="layui-input-inline">
                <input type="text" name="keyword" placeholder="支持模糊查询.." autocomplete="off" class="layui-input">
            </div>
            <div class="layui-form-mid layui-word-aux" style="padding:0;">
                <button lay-filter="search" class="layui-btn" lay-submit><i class="fa fa-search" aria-hidden="true"></i> 查询</button>
            </div>
        </div>
    </form>
    <div class="layui-clear"></div>
</blockquote>
<div id="content" style="width: 100%;height: 533px;"></div>

<script>

    var columns=[{ //配置数据列
        fieldName: '事件ID',
        field: 'id',
        sortable: true
    }, {
        fieldName: '事件标题',
        field: 'title',
        sortable: false
    }, {
        fieldName: '游戏',
        field: 'game_name',
        sortable: false
    }, {
        fieldName: 'CP游戏APPID',
        field: 'appid',
        sortable: false
    }, {
        fieldName: 'SDK游戏APPID',
        field: 'app_id',
        sortable: false
    }, {
        fieldName: 'SDK平台',
        field: 'platform',
        sortable: false
    }, {
        fieldName: '用户名',
        field: 'username',
        sortable: false
    }, {
        fieldName: '事件类型',
        field: 'type_name',
        sortable: true
    }, {
        fieldName: '事件操作类型',
        field: 'operate_type_name',
        sortable: true
    }, {
        fieldName: '状态',
        field: 'status_name',
        sortable: true
    }, {
        fieldName: '事件开始时间',
        field: 'begin_time',
        sortable: true
    }, {
        fieldName: '事件结束时间',
        field: 'end_time',
        sortable: true
    }, {
        fieldName: '备注',
        field: 'remark',
        sortable: false
    }, {
        fieldName: '操作',
        field: 'copy_id',
        format: function (val,obj) {
            var html='';
            if(val){
                html+='<input type="button" value="编辑" data-action="edit" data-id="' + val + '" data-url="'+obj.url_edit+'" class="layui-btn layui-btn-mini" />';
                html+='<input type="button" value="删除" data-action="del" data-id="' + val + '" data-url="'+obj.url_del+'" class="layui-btn layui-btn-mini layui-btn-danger" />';
            }
            return html;
        }
    }];

    var title='td[data-field=title]';//弹窗标题展示的字段
    var area=['540px','600px'];//弹窗大小
    var content_url='{:Url("admin/Event/getList")}';//表格内容请求接口
    var edit_url='{:Url("admin/Event/add")}';//添加数据请求接口
    var switch_url='{:Url("admin/Event/editStatus")}';//状态切换请求接口

</script>